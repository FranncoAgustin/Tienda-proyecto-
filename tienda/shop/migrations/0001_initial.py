from django.db import migrations, models
import django.db.models.deletion
class Migration(migrations.Migration):
    initial=True; dependencies=[]
    operations=[
        migrations.CreateModel(
            name='Product',
            fields=[('id',models.BigAutoField(auto_created=True,primary_key=True,serialize=False,verbose_name='ID')),
                    ('sku',models.CharField(blank=True,max_length=64,null=True,unique=True)),
                    ('internal_name',models.CharField(db_index=True,max_length=255)),
                    ('public_name',models.CharField(max_length=255)),
                    ('description',models.TextField(blank=True,default='')),
                    ('base_price',models.DecimalField(decimal_places=2,max_digits=12)),
                    ('image',models.ImageField(blank=True,null=True,upload_to='productos/')),
                    ('active',models.BooleanField(default=True)),
                    ('created_at',models.DateTimeField(auto_now_add=True))],
            options={'db_table':'shop_product'},),
        migrations.CreateModel(
            name='Variant',
            fields=[('id',models.BigAutoField(auto_created=True,primary_key=True,serialize=False,verbose_name='ID')),
                    ('sku',models.CharField(blank=True,max_length=64,null=True,unique=True)),
                    ('color',models.CharField(blank=True,default='',max_length=64)),
                    ('size',models.CharField(blank=True,default='',max_length=32)),
                    ('price_override',models.DecimalField(blank=True,decimal_places=2,max_digits=12,null=True)),
                    ('stock',models.PositiveIntegerField(default=0)),
                    ('active',models.BooleanField(default=True)),
                    ('product',models.ForeignKey(on_delete=django.db.models.deletion.CASCADE,related_name='variants',to='shop.product'))],
            options={'db_table':'shop_variant','unique_together':{('product','color','size')}}),
        migrations.CreateModel(
            name='Order',
            fields=[('id',models.BigAutoField(auto_created=True,primary_key=True,serialize=False,verbose_name='ID')),
                    ('created_at',models.DateTimeField(auto_now_add=True)),
                    ('email',models.EmailField(max_length=254)),
                    ('full_name',models.CharField(max_length=160)),
                    ('status',models.CharField(default='pending',max_length=20)),
                    ('total',models.DecimalField(decimal_places=2,default=0,max_digits=12)),
                    ('mp_preference_id',models.CharField(blank=True,default='',max_length=80)),
                    ('mp_payment_id',models.CharField(blank=True,default='',max_length=80))],
            options={'db_table':'shop_order'}),
        migrations.CreateModel(
            name='OrderItem',
            fields=[('id',models.BigAutoField(auto_created=True,primary_key=True,serialize=False,verbose_name='ID')),
                    ('quantity',models.PositiveIntegerField()),
                    ('unit_price',models.DecimalField(decimal_places=2,max_digits=12)),
                    ('order',models.ForeignKey(on_delete=django.db.models.deletion.CASCADE,related_name='items',to='shop.order')),
                    ('variant',models.ForeignKey(on_delete=django.db.models.deletion.PROTECT,to='shop.variant'))],
            options={'db_table':'shop_order_item'}),
        migrations.CreateModel(
            name='ProductAlias',
            fields=[('id',models.BigAutoField(auto_created=True,primary_key=True,serialize=False,verbose_name='ID')),
                    ('source_name',models.CharField(db_index=True,max_length=255)),
                    ('product',models.ForeignKey(on_delete=django.db.models.deletion.CASCADE,related_name='aliases',to='shop.product'))],
            options={'db_table':'shop_product_alias','unique_together':{('product','source_name')}}),
        migrations.CreateModel(
            name='StockEntry',
            fields=[('id',models.BigAutoField(auto_created=True,primary_key=True,serialize=False,verbose_name='ID')),
                    ('created_at',models.DateTimeField(auto_now_add=True)),
                    ('date',models.DateField()),
                    ('quantity',models.IntegerField()),
                    ('unit_cost',models.DecimalField(decimal_places=2,default=0,max_digits=12)),
                    ('note',models.CharField(blank=True,default='',max_length=255)),
                    ('source_name',models.CharField(blank=True,default='',max_length=255)),
                    ('product',models.ForeignKey(on_delete=django.db.models.deletion.PROTECT,related_name='stock_entries',to='shop.product')),
                    ('variant',models.ForeignKey(blank=True,null=True,on_delete=django.db.models.deletion.PROTECT,related_name='stock_entries',to='shop.variant'))],
            options={'db_table':'shop_stock_entry','ordering':['-date','-id']}),
    ]